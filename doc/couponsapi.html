<!DOCTYPE HTML><html><head><title>CouponCode API documentation</title><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="generator" content="https://github.com/raml2html/raml2html 3.0.1"><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css"><script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script><script type="text/javascript" src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script><script type="text/javascript">
      $(document).ready(function() {
        $('.page-header pre code, .top-resource-description pre code, .modal-body pre code').each(function(i, block) {
          hljs.highlightBlock(block);
        });

        $('[data-toggle]').click(function() {
          var selector = $(this).data('target') + ' pre code';
          $(selector).each(function(i, block) {
            hljs.highlightBlock(block);
          });
        });

        // open modal on hashes like #_action_get
        $(window).bind('hashchange', function(e) {
          var anchor_id = document.location.hash.substr(1); //strip #
          var element = $('#' + anchor_id);

          // do we have such element + is it a modal?  --> show it
          if (element.length && element.hasClass('modal')) {
            element.modal('show');
          }
        });

        // execute hashchange on first page load
        $(window).trigger('hashchange');

        // remove url fragment on modal hide
        $('.modal').on('hidden.bs.modal', function() {
          try {
            if (history && history.replaceState) {
                history.replaceState({}, '', '#');
            }
          } catch(e) {}
        });
      });
    </script><style>
      .hljs {
        background: transparent;
      }
      .parent {
        color: #999;
      }
      .list-group-item > .badge {
        float: none;
        margin-right: 6px;
      }
      .panel-title > .methods {
        float: right;
      }
      .badge {
        border-radius: 0;
        text-transform: uppercase;
        width: 70px;
        font-weight: normal;
        color: #f3f3f6;
        line-height: normal;
      }
      .badge_get {
        background-color: #63a8e2;
      }
      .badge_post {
        background-color: #6cbd7d;
      }
      .badge_put {
        background-color: #22bac4;
      }
      .badge_delete {
        background-color: #d26460;
      }
      .badge_patch {
        background-color: #ccc444;
      }
      .list-group, .panel-group {
        margin-bottom: 0;
      }
      .panel-group .panel+.panel-white {
        margin-top: 0;
      }
      .panel-group .panel-white {
        border-bottom: 1px solid #F5F5F5;
        border-radius: 0;
      }
      .panel-white:last-child {
        border-bottom-color: white;
        -webkit-box-shadow: none;
        box-shadow: none;
      }
      .panel-white .panel-heading {
        background: white;
      }
      .tab-pane ul {
        padding-left: 2em;
      }
      .tab-pane h1 {
        font-size: 1.3em;
      }
      .tab-pane h2 {
        font-size: 1.2em;
        padding-bottom: 4px;
        border-bottom: 1px solid #ddd;
      }
      .tab-pane h3 {
        font-size: 1.1em;
      }
      .tab-content {
        border-left: 1px solid #ddd;
        border-right: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        padding: 10px;
      }
      #sidebar {
        margin-top: 30px;
        padding-right: 5px;
        overflow: auto;
        height: 90%;
      }
      .top-resource-description {
        border-bottom: 1px solid #ddd;
        background: #fcfcfc;
        padding: 15px 15px 0 15px;
        margin: -15px -15px 10px -15px;
      }
      .resource-description {
        border-bottom: 1px solid #fcfcfc;
        background: #fcfcfc;
        padding: 15px 15px 0 15px;
        margin: -15px -15px 10px -15px;
      }
      .resource-description p:last-child {
        margin: 0;
      }
      .list-group .badge {
        float: left;
      }
      .method_description {
        margin-left: 85px;
      }
      .method_description p:last-child {
        margin: 0;
      }
      .list-group-item {
        cursor: pointer;
      }
      .list-group-item:hover {
        background-color: #f5f5f5;
      }

      pre code {
        overflow: auto;
        word-wrap: normal;
        white-space: pre;
      }
    </style></head><body data-spy="scroll" data-target="#sidebar"><div class="container"><div class="row"><div class="col-md-9" role="main"><div class="page-header"><h1>CouponCode API documentation <small>version v1</small></h1><p>http://server/api/v1</p></div><div class="panel panel-default"><div class="panel-heading"><h3 id="coupons" class="panel-title">coupons</h3></div><div class="panel-body"><div class="panel-group"><div class="panel panel-white"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_coupons"><span class="parent"></span>/coupons</a> <span class="methods"><a href="#coupons_get"><span class="badge badge_get">get</span></a> <a href="#coupons_post"><span class="badge badge_post">post</span></a></span></h4></div><div id="panel_coupons" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#coupons_get'" class="list-group-item"><span class="badge badge_get">get</span><div class="method_description"><p>list all the coupons (admin only)</p></div><div class="clearfix"></div></div><div onclick="window.location.href = '#coupons_post'" class="list-group-item"><span class="badge badge_post">post</span><div class="method_description"><p>create a new coupon. signedToken is used for admin to create coupon with rules. Post request without signedKey will create coupon with default rule regardless of the rules passed in, ie. ignoring couponRule and rebateRule. New bussiness model utilises coupon as a sales ref, hence, each coupon code has a type to identify if its type. By default, it&#39;s normal, with token, client can create other types of coupon, for example: SALES.</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons_get"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get</span> <span class="parent"></span>/coupons</h4></div><div class="modal-body"><div class="alert alert-info"><p>list all the coupons (admin only)</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons_get_request" data-toggle="tab">Request</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons_get_request"><h3>Query Parameters</h3><ul><li><strong>token</strong>: <em>required (string)</em></li></ul></div></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons_post"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_post">post</span> <span class="parent"></span>/coupons</h4></div><div class="modal-body"><div class="alert alert-info"><p>create a new coupon. signedToken is used for admin to create coupon with rules. Post request without signedKey will create coupon with default rule regardless of the rules passed in, ie. ignoring couponRule and rebateRule. New bussiness model utilises coupon as a sales ref, hence, each coupon code has a type to identify if its type. By default, it&#39;s normal, with token, client can create other types of coupon, for example: SALES.</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons_post_request" data-toggle="tab">Request</a></li><li><a href="#coupons_post_response" data-toggle="tab">Response</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons_post_request"><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Schema</strong>:</p><pre><code>coupon without coupon code</code></pre><p><strong>Example</strong>:</p><pre><code>{
  "username": "test1",
  "mobile": "12345356467",
  "couponRule" : {
    "type" : "perc",
    "value" : 10
  },
  "rebateRule": {
    "type": "cash",
    "value": 100
  },
  "token" : "dfsdoiuwqe"
}
</code></pre></div><div class="tab-pane" id="coupons_post_response"><h2>HTTP status code <a href="http://httpstatus.es/201" target="_blank">201</a></h2><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Schema</strong>:</p><pre><code>{
   "$schema": "http://json-schema.org/draft-04/schema#",
   "type": "object",
   "properties": {
      "couponCode" : {
        "type" : "string"
      },
      "username" : {
        "type": "string"
      },
      "couponRule" : {
        "type" : "object",
        "properties" : {
          "type" : {
            "type" : "string",
            "enum": ["perc", "cash"]
          },
          "value": {
            "type" : "number",
            "minimum": 0,
            "description" : "must be less than 100 when type is perc."
          }
        },
        "required" : ["type", "value"]
      },
      "rebateRule" : {
        "type" : "object",
        "properties" : {
          "type" : {
            "type" : "string",
            "enum": ["perc", "cash"]
          },
          "value": {
            "type" : "number",
            "minimum": 0,
            "description" : "must be less than 100 when type is perc."
          }
        },
        "required" : ["type", "value"]
      },
      "valid" : {
        "type" : "boolean",
        "defualt" : true
      },
      "couponType" : {
        "type" : "string",
        "default" : "NORMAL",
        "enum" : ["NORMAL", "SALES"]
      }
   },
   "required": ["couponCode", "username", "couponRule", "rebateRule", "couponType"]
}
</code></pre><p><strong>Example</strong>:</p><pre><code>{
  "couponCode" : "test1perc10",
  "username": "test1",
  "couponRule": {
    "type" : "perc",
    "value" : 10
  },
  "rebateRule": {
    "type": "cash",
    "value": 100
  }
}
</code></pre><h2>HTTP status code <a href="http://httpstatus.es/406" target="_blank">406</a></h2><p>returned when Json posted has invalid properties</p><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Example</strong>:</p><pre><code>{
  "message" : "mobile is required."
}
</code></pre></div></div></div></div></div></div></div><div class="panel panel-white"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_coupons_login"><span class="parent">/coupons</span>/login</a> <span class="methods"><a href="#coupons_login_post"><span class="badge badge_post">post</span></a></span></h4></div><div id="panel_coupons_login" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#coupons_login_post'" class="list-group-item"><span class="badge badge_post">post</span><div class="method_description"><p>login use username and password, return a signed token</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons_login_post"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_post">post</span> <span class="parent">/coupons</span>/login</h4></div><div class="modal-body"><div class="alert alert-info"><p>login use username and password, return a signed token</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons_login_post_request" data-toggle="tab">Request</a></li><li><a href="#coupons_login_post_response" data-toggle="tab">Response</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons_login_post_request"><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Example</strong>:</p><pre><code>{
  "username" : "admin1",
  "password" : "adminHash"
}
</code></pre></div><div class="tab-pane" id="coupons_login_post_response"><h2>HTTP status code <a href="http://httpstatus.es/201" target="_blank">201</a></h2><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Example</strong>:</p><pre><code>{
  "success" : true,
  "token" : "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjoidGVzdEFkbWluMSIsImlhdCI6MTQ3OTUwMzQ2MCwiZXhwIjoxNDc5NTA3MDYwfQ.p6JQc9ksEI2aQPD3Lw8kepCvHCqcYpM94bpUrs4zotY"
}
</code></pre><h2>HTTP status code <a href="http://httpstatus.es/401" target="_blank">401</a></h2><p>Auth failed.</p></div></div></div></div></div></div></div><div class="panel panel-white"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_coupons_defaultRules"><span class="parent">/coupons</span>/defaultRules</a> <span class="methods"><a href="#coupons_defaultRules_get"><span class="badge badge_get">get</span></a> <a href="#coupons_defaultRules_put"><span class="badge badge_put">put</span></a></span></h4></div><div id="panel_coupons_defaultRules" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#coupons_defaultRules_get'" class="list-group-item"><span class="badge badge_get">get</span><div class="method_description"><p>get default rules.</p></div><div class="clearfix"></div></div><div onclick="window.location.href = '#coupons_defaultRules_put'" class="list-group-item"><span class="badge badge_put">put</span><div class="method_description"><p>update default rules, must pass in signed token.</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons_defaultRules_get"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get</span> <span class="parent">/coupons</span>/defaultRules</h4></div><div class="modal-body"><div class="alert alert-info"><p>get default rules.</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons_defaultRules_get_response" data-toggle="tab">Response</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons_defaultRules_get_response"><h2>HTTP status code <a href="http://httpstatus.es/200" target="_blank">200</a></h2><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Schema</strong>:</p><pre><code>see coupon schema rules section</code></pre><p><strong>Example</strong>:</p><pre><code>{
  "couponRule": {
    "type" : "perc",
    "value" : 10
  },
  "rebateRule": {
    "type": "cash",
    "value": 100
  }
}
</code></pre></div></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons_defaultRules_put"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_put">put</span> <span class="parent">/coupons</span>/defaultRules</h4></div><div class="modal-body"><div class="alert alert-info"><p>update default rules, must pass in signed token.</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons_defaultRules_put_request" data-toggle="tab">Request</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons_defaultRules_put_request"><h3>Query Parameters</h3><ul><li><strong>rebateType</strong>: <em>(one of perc, cash)</em></li><li><strong>rebateValue</strong>: <em>(integer)</em></li><li><strong>couponType</strong>: <em>(string)</em></li><li><strong>couponValue</strong>: <em>(string)</em></li><li><strong>token</strong>: <em>required (string)</em></li></ul></div></div></div></div></div></div></div><div class="panel panel-white"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_coupons__couponCode_"><span class="parent">/coupons</span>/{couponCode}</a> <span class="methods"><a href="#coupons__couponCode__get"><span class="badge badge_get">get</span></a> <a href="#coupons__couponCode__delete"><span class="badge badge_delete">delete</span></a> <a href="#coupons__couponCode__put"><span class="badge badge_put">put</span></a></span></h4></div><div id="panel_coupons__couponCode_" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#coupons__couponCode__get'" class="list-group-item"><span class="badge badge_get">get</span><div class="method_description"><p>get the details of a coupon</p></div><div class="clearfix"></div></div><div onclick="window.location.href = '#coupons__couponCode__delete'" class="list-group-item"><span class="badge badge_delete">delete</span><div class="method_description"><p>delete a coupon, require an admin signed token.</p></div><div class="clearfix"></div></div><div onclick="window.location.href = '#coupons__couponCode__put'" class="list-group-item"><span class="badge badge_put">put</span><div class="method_description"><p>update a coupon, require an admin signed token.</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons__couponCode__get"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get</span> <span class="parent">/coupons</span>/{couponCode}</h4></div><div class="modal-body"><div class="alert alert-info"><p>get the details of a coupon</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons__couponCode__get_request" data-toggle="tab">Request</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons__couponCode__get_request"><h3>URI Parameters</h3><ul><li><strong>couponCode</strong>: <em>required (string)</em></li></ul></div></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons__couponCode__delete"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_delete">delete</span> <span class="parent">/coupons</span>/{couponCode}</h4></div><div class="modal-body"><div class="alert alert-info"><p>delete a coupon, require an admin signed token.</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons__couponCode__delete_request" data-toggle="tab">Request</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons__couponCode__delete_request"><h3>URI Parameters</h3><ul><li><strong>couponCode</strong>: <em>required (string)</em></li></ul></div></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons__couponCode__put"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_put">put</span> <span class="parent">/coupons</span>/{couponCode}</h4></div><div class="modal-body"><div class="alert alert-info"><p>update a coupon, require an admin signed token.</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons__couponCode__put_request" data-toggle="tab">Request</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons__couponCode__put_request"><h3>URI Parameters</h3><ul><li><strong>couponCode</strong>: <em>required (string)</em></li></ul></div></div></div></div></div></div></div><div class="panel panel-white"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_coupons__couponCode__orders"><span class="parent">/coupons/{couponCode}</span>/orders</a> <span class="methods"><a href="#coupons__couponCode__orders_get"><span class="badge badge_get">get</span></a> <a href="#coupons__couponCode__orders_post"><span class="badge badge_post">post</span></a></span></h4></div><div id="panel_coupons__couponCode__orders" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#coupons__couponCode__orders_get'" class="list-group-item"><span class="badge badge_get">get</span><div class="method_description"><p>list all the orders linked to this coupon, signedToken required.</p></div><div class="clearfix"></div></div><div onclick="window.location.href = '#coupons__couponCode__orders_post'" class="list-group-item"><span class="badge badge_post">post</span><div class="method_description"><p>link an order with this coupon, and return the discounted order for verification</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons__couponCode__orders_get"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get</span> <span class="parent">/coupons/{couponCode}</span>/orders</h4></div><div class="modal-body"><div class="alert alert-info"><p>list all the orders linked to this coupon, signedToken required.</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons__couponCode__orders_get_request" data-toggle="tab">Request</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons__couponCode__orders_get_request"><h3>URI Parameters</h3><ul><li><strong>couponCode</strong>: <em>required (string)</em></li></ul><h3>Query Parameters</h3><ul><li><strong>rebated</strong>: <em>required (boolean - default: false)</em><p>leave out for all orders</p></li><li><strong>showTotalNum</strong>: <em>(boolean - default: false)</em><p>only the total number of orders lined to this coupon code.</p></li><li><strong>filter</strong>: <em>(one of all, direct, salesRef - default: all)</em><p>show all orders / only orders using this code / only orders with a sales ref to this code</p></li><li><strong>token</strong>: <em>required (string)</em></li><li><strong>since</strong>: <em>(string)</em><p>list orders since this date, string required in a format where a Date object can be created from (<a href="http://www.w3schools.com/js/js_date_formats.asp">http://www.w3schools.com/js/js_date_formats.asp</a>).</p><p><strong>Example</strong>:</p><pre>Sun Nov 27 2016 00:00:00 GMT+0000 (GMT 标准时间)</pre></li><li><strong>until</strong>: <em>(string)</em><p>list orders up to this date, string required in a format where a Date object can be created from (<a href="http://www.w3schools.com/js/js_date_formats.asp">http://www.w3schools.com/js/js_date_formats.asp</a>).</p><p><strong>Example</strong>:</p><pre>Wed Mar 25 2015 12:00:00 GMT+0000 (GMT 标准时间)</pre></li></ul></div></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons__couponCode__orders_post"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_post">post</span> <span class="parent">/coupons/{couponCode}</span>/orders</h4></div><div class="modal-body"><div class="alert alert-info"><p>link an order with this coupon, and return the discounted order for verification</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons__couponCode__orders_post_request" data-toggle="tab">Request</a></li><li><a href="#coupons__couponCode__orders_post_response" data-toggle="tab">Response</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons__couponCode__orders_post_request"><h3>URI Parameters</h3><ul><li><strong>couponCode</strong>: <em>required (string)</em></li></ul><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Example</strong>:</p><pre><code>{
  "orderId" : "order1239852",
  "orderName" : "physics01",
  "orderValue" : {
    "original" : 1000,
    "final" : 800
  },
  "username" : "userA"
}
</code></pre></div><div class="tab-pane" id="coupons__couponCode__orders_post_response"><h2>HTTP status code <a href="http://httpstatus.es/201" target="_blank">201</a></h2><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Schema</strong>:</p><pre><code>{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type" : "object",
  "description" : "An order with coupon applied.",
  "properties": {
    "couponCode": {
        "type": "string"
    },
    "orderId": {
      "type" : "string"
    },
    "orderName": {
      "type" : "string"
    },
    "orderValue": {
      "type" : "object",
      "properties" : {
        "original" : {
          "type" : "number"
        },
        "final" : {
          "type" : "number"
        }
      },
      "required" : ["original", "final"]
    },
    "rebated": {
      "type" : "boolean"
    },
    "rebateValue": {
      "type" : "number"
    }
  },
  "required": ["couponCode", "orderId", "orderValue", "rebated"]
}
</code></pre><p><strong>Example</strong>:</p><pre><code>{
  "orderId" : "guid....",
  "couponCode" : "test1perc10",
  "orderValue" : {
    "original" : 1000,
    "final" : 800
  },
  "rebated" : false,
  "rebateValue" : 100
}
</code></pre><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><p>when the coupon code is not applicable to this user, hence invalid order.</p><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Example</strong>:</p><pre><code>{
  "message" : "coupon code 123123 is not valid for userA"
}
</code></pre></div></div></div></div></div></div></div><div class="panel panel-white"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_coupons__couponCode__orders__orderId_"><span class="parent">/coupons/{couponCode}/orders</span>/{orderId}</a> <span class="methods"><a href="#coupons__couponCode__orders__orderId__get"><span class="badge badge_get">get</span></a> <a href="#coupons__couponCode__orders__orderId__put"><span class="badge badge_put">put</span></a></span></h4></div><div id="panel_coupons__couponCode__orders__orderId_" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#coupons__couponCode__orders__orderId__get'" class="list-group-item"><span class="badge badge_get">get</span><div class="method_description"><p>get the order details with coupon code</p></div><div class="clearfix"></div></div><div onclick="window.location.href = '#coupons__couponCode__orders__orderId__put'" class="list-group-item"><span class="badge badge_put">put</span><div class="method_description"><p>update coupon-order record.</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons__couponCode__orders__orderId__get"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get</span> <span class="parent">/coupons/{couponCode}/orders</span>/{orderId}</h4></div><div class="modal-body"><div class="alert alert-info"><p>get the order details with coupon code</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons__couponCode__orders__orderId__get_request" data-toggle="tab">Request</a></li><li><a href="#coupons__couponCode__orders__orderId__get_response" data-toggle="tab">Response</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons__couponCode__orders__orderId__get_request"><h3>URI Parameters</h3><ul><li><strong>couponCode</strong>: <em>required (string)</em></li><li><strong>orderId</strong>: <em>required (string)</em></li></ul></div><div class="tab-pane" id="coupons__couponCode__orders__orderId__get_response"><h2>HTTP status code <a href="http://httpstatus.es/200" target="_blank">200</a></h2><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Schema</strong>:</p><pre><code>{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type" : "object",
  "description" : "An order with coupon applied.",
  "properties": {
    "couponCode": {
        "type": "string"
    },
    "orderId": {
      "type" : "string"
    },
    "orderName": {
      "type" : "string"
    },
    "orderValue": {
      "type" : "object",
      "properties" : {
        "original" : {
          "type" : "number"
        },
        "final" : {
          "type" : "number"
        }
      },
      "required" : ["original", "final"]
    },
    "rebated": {
      "type" : "boolean"
    },
    "rebateValue": {
      "type" : "number"
    }
  },
  "required": ["couponCode", "orderId", "orderValue", "rebated"]
}
</code></pre></div></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons__couponCode__orders__orderId__put"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_put">put</span> <span class="parent">/coupons/{couponCode}/orders</span>/{orderId}</h4></div><div class="modal-body"><div class="alert alert-info"><p>update coupon-order record.</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons__couponCode__orders__orderId__put_request" data-toggle="tab">Request</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons__couponCode__orders__orderId__put_request"><h3>URI Parameters</h3><ul><li><strong>couponCode</strong>: <em>required (string)</em></li><li><strong>orderId</strong>: <em>required (string)</em></li></ul><h3>Query Parameters</h3><ul><li><strong>token</strong>: <em>required (string)</em></li><li><strong>rebated</strong>: <em>(boolean)</em></li><li><strong>rebateValue</strong>: <em>(string)</em></li></ul></div></div></div></div></div></div></div><div class="panel panel-white"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_coupons__couponCode__discount"><span class="parent">/coupons/{couponCode}</span>/discount</a> <span class="methods"><a href="#coupons__couponCode__discount_get"><span class="badge badge_get">get</span></a></span></h4></div><div id="panel_coupons__couponCode__discount" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#coupons__couponCode__discount_get'" class="list-group-item"><span class="badge badge_get">get</span><div class="method_description"><p>get discounted order after applying the coupon</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons__couponCode__discount_get"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get</span> <span class="parent">/coupons/{couponCode}</span>/discount</h4></div><div class="modal-body"><div class="alert alert-info"><p>get discounted order after applying the coupon</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons__couponCode__discount_get_request" data-toggle="tab">Request</a></li><li><a href="#coupons__couponCode__discount_get_response" data-toggle="tab">Response</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons__couponCode__discount_get_request"><h3>URI Parameters</h3><ul><li><strong>couponCode</strong>: <em>required (string)</em></li></ul><h3>Query Parameters</h3><ul><li><strong>orderId</strong>: <em>(string)</em></li><li><strong>orderValue</strong>: <em>required (integer)</em></li><li><strong>username</strong>: <em>required (string)</em><p>used to verify if this coupon is applicable to this user.</p></li></ul></div><div class="tab-pane" id="coupons__couponCode__discount_get_response"><h2>HTTP status code <a href="http://httpstatus.es/200" target="_blank">200</a></h2><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Example</strong>:</p><pre><code>{
  "coupon" : "userAPerc10",
  "discountedValue": 800
}
</code></pre><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><p>when the coupon code is not applicable to this user</p><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Example</strong>:</p><pre><code>{
  "message" : "coupon code 123123 is not valid for userA"
}
</code></pre><h2>HTTP status code <a href="http://httpstatus.es/406" target="_blank">406</a></h2><p>when couponcode is not valid</p><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Example</strong>:</p><pre><code>{
  "message" : "coupon code 123124 is not valid"
}
</code></pre></div></div></div></div></div></div></div><div class="panel panel-white"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_coupons_orders"><span class="parent">/coupons</span>/orders</a> <span class="methods"><a href="#coupons_orders_post"><span class="badge badge_post">post</span></a> <a href="#coupons_orders_get"><span class="badge badge_get">get</span></a></span></h4></div><div id="panel_coupons_orders" class="panel-collapse collapse"><div class="panel-body"><div class="resource-description"><p>mostly serverd as a shortcut to /coupons/{couponCode}/orders/{orderId}</p></div><div class="list-group"><div onclick="window.location.href = '#coupons_orders_post'" class="list-group-item"><span class="badge badge_post">post</span><div class="method_description"><p>create a new coupon order</p></div><div class="clearfix"></div></div><div onclick="window.location.href = '#coupons_orders_get'" class="list-group-item"><span class="badge badge_get">get</span><div class="method_description"><p>get all the orders with filters applied.</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons_orders_post"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_post">post</span> <span class="parent">/coupons</span>/orders</h4></div><div class="modal-body"><div class="alert alert-info"><p>create a new coupon order</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons_orders_post_request" data-toggle="tab">Request</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons_orders_post_request"><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Schema</strong>:</p><pre><code>{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type" : "object",
  "description" : "An order with coupon applied.",
  "properties": {
    "couponCode": {
        "type": "string"
    },
    "orderId": {
      "type" : "string"
    },
    "orderName": {
      "type" : "string"
    },
    "orderValue": {
      "type" : "object",
      "properties" : {
        "original" : {
          "type" : "number"
        },
        "final" : {
          "type" : "number"
        }
      },
      "required" : ["original", "final"]
    },
    "rebated": {
      "type" : "boolean"
    },
    "rebateValue": {
      "type" : "number"
    }
  },
  "required": ["couponCode", "orderId", "orderValue", "rebated"]
}
</code></pre></div></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons_orders_get"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get</span> <span class="parent">/coupons</span>/orders</h4></div><div class="modal-body"><div class="alert alert-info"><p>get all the orders with filters applied.</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons_orders_get_request" data-toggle="tab">Request</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons_orders_get_request"><h3>Query Parameters</h3><ul><li><strong>token</strong>: <em>required (string)</em><p>token for admin auth.</p></li><li><strong>rebated</strong>: <em>(boolean)</em></li><li><strong>since</strong>: <em>(string)</em><p>list orders since this date, string required in a format where a Date object can be created from (<a href="http://www.w3schools.com/js/js_date_formats.asp">http://www.w3schools.com/js/js_date_formats.asp</a>).</p><p><strong>Example</strong>:</p><pre>Sun Nov 27 2016 00:00:00 GMT+0000 (GMT 标准时间)</pre></li><li><strong>until</strong>: <em>(string)</em><p>list orders up to this date, string required in a format where a Date object can be created from (<a href="http://www.w3schools.com/js/js_date_formats.asp">http://www.w3schools.com/js/js_date_formats.asp</a>).</p><p><strong>Example</strong>:</p><pre>Wed Mar 25 2015 12:00:00 GMT+0000 (GMT 标准时间)</pre></li></ul></div></div></div></div></div></div></div><div class="panel panel-white"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_coupons_orders__orderId_"><span class="parent">/coupons/orders</span>/{orderId}</a> <span class="methods"><a href="#coupons_orders__orderId__get"><span class="badge badge_get">get</span></a> <a href="#coupons_orders__orderId__put"><span class="badge badge_put">put</span></a></span></h4></div><div id="panel_coupons_orders__orderId_" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#coupons_orders__orderId__get'" class="list-group-item"><span class="badge badge_get">get</span><div class="method_description"><p>get a coupon order by orderId</p></div><div class="clearfix"></div></div><div onclick="window.location.href = '#coupons_orders__orderId__put'" class="list-group-item"><span class="badge badge_put">put</span><div class="method_description"><p>edit a coupon order, required admin signed token</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons_orders__orderId__get"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get</span> <span class="parent">/coupons/orders</span>/{orderId}</h4></div><div class="modal-body"><div class="alert alert-info"><p>get a coupon order by orderId</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons_orders__orderId__get_request" data-toggle="tab">Request</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons_orders__orderId__get_request"><h3>URI Parameters</h3><ul><li><strong>orderId</strong>: <em>required (string)</em></li></ul></div></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons_orders__orderId__put"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_put">put</span> <span class="parent">/coupons/orders</span>/{orderId}</h4></div><div class="modal-body"><div class="alert alert-info"><p>edit a coupon order, required admin signed token</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons_orders__orderId__put_request" data-toggle="tab">Request</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons_orders__orderId__put_request"><h3>URI Parameters</h3><ul><li><strong>orderId</strong>: <em>required (string)</em></li></ul></div></div></div></div></div></div></div><div class="panel panel-white"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_coupons_users__username_"><span class="parent">/coupons/users</span>/{username}</a> <span class="methods"><a href="#coupons_users__username__get"><span class="badge badge_get">get</span></a> <a href="#coupons_users__username__post"><span class="badge badge_post">post</span></a></span></h4></div><div id="panel_coupons_users__username_" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#coupons_users__username__get'" class="list-group-item"><span class="badge badge_get">get</span><div class="method_description"><p>get coupon codes by user name.</p></div><div class="clearfix"></div></div><div onclick="window.location.href = '#coupons_users__username__post'" class="list-group-item"><span class="badge badge_post">post</span><div class="method_description"><p>create a new coupon code for user, similar to post to /coupons.</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons_users__username__get"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get</span> <span class="parent">/coupons/users</span>/{username}</h4></div><div class="modal-body"><div class="alert alert-info"><p>get coupon codes by user name.</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons_users__username__get_request" data-toggle="tab">Request</a></li><li><a href="#coupons_users__username__get_response" data-toggle="tab">Response</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons_users__username__get_request"><h3>URI Parameters</h3><ul><li><strong>username</strong>: <em>required (string)</em></li></ul><h3>Query Parameters</h3><ul><li><strong>showTotalOrderNumber</strong>: <em>(string - default: false)</em><p>if set true, return the number of orders using the coupons/coupon belong to this user.</p></li></ul></div><div class="tab-pane" id="coupons_users__username__get_response"><h2>HTTP status code <a href="http://httpstatus.es/200" target="_blank">200</a></h2><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Schema</strong>:</p><pre><code>a list of coupons</code></pre><p><strong>Example</strong>:</p><pre><code>{
  "coupons":
    [
      {
        "couponCode": "user1cash10",
        "username": "user1",
        "couponRule": {
          "type": "PERCENTAGE",
          "value": 10
        },
        "rebateRule": {
          "type": "CASH",
          "value": 100
        }
      }
    ],
  "totalCouponOrders": 25
}
</code></pre><h2>HTTP status code <a href="http://httpstatus.es/404" target="_blank">404</a></h2><p>when username does not exits</p><h3>Body</h3><p><strong>Type: application/json</strong></p><p><strong>Example</strong>:</p><pre><code>{
  "message" : "username test01 does not have any coupon code."
}
</code></pre></div></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons_users__username__post"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_post">post</span> <span class="parent">/coupons/users</span>/{username}</h4></div><div class="modal-body"><div class="alert alert-info"><p>create a new coupon code for user, similar to post to /coupons.</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons_users__username__post_request" data-toggle="tab">Request</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons_users__username__post_request"><h3>URI Parameters</h3><ul><li><strong>username</strong>: <em>required (string)</em></li></ul></div></div></div></div></div></div></div><div class="panel panel-white"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_coupons_users__username__orders"><span class="parent">/coupons/users/{username}</span>/orders</a> <span class="methods"><a href="#coupons_users__username__orders_get"><span class="badge badge_get">get</span></a></span></h4></div><div id="panel_coupons_users__username__orders" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#coupons_users__username__orders_get'" class="list-group-item"><span class="badge badge_get">get</span><div class="method_description"><p>list all the orders linked to the coupons belong to this user. Auth required.</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="coupons_users__username__orders_get"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get</span> <span class="parent">/coupons/users/{username}</span>/orders</h4></div><div class="modal-body"><div class="alert alert-info"><p>list all the orders linked to the coupons belong to this user. Auth required.</p></div><ul class="nav nav-tabs"><li class="active"><a href="#coupons_users__username__orders_get_request" data-toggle="tab">Request</a></li></ul><div class="tab-content"><div class="tab-pane active" id="coupons_users__username__orders_get_request"><h3>URI Parameters</h3><ul><li><strong>username</strong>: <em>required (string)</em></li></ul></div></div></div></div></div></div></div></div></div></div></div><div class="col-md-3"><div id="sidebar" class="hidden-print affix" role="complementary"><ul class="nav nav-pills nav-stacked"><li><a href="#coupons">coupons</a></li></ul></div></div></div></div></body></html>